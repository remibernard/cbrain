
<%-
#
# CBRAIN Project
#
# Copyright (C) 2008-2012
# The Royal Institution for the Advancement of Learning
# McGill University
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
-%>

<%= button_with_dropdown_menu("View Options") do %>
  <div class="view_options">
    <% user_list = current_user.available_users.sort_by(&:login) %>
    <% if user_list.size > 1 %>
      Browse as another user:
      <%=
        ajax_onchange_select(:as_user_id,
          browse_data_provider_path,
          options_for_select(
            user_list.collect { |u| [ u.login, u.id.to_s ] },
            @as_user.id.to_s
          ),
          :datatype => 'script'
        )
      %>
      <br/>
    <% end %>

    <%=
      ajax_link('Refresh list of files',
        browse_data_provider_path(:refresh => true),
        :datatype => 'script'
      )
    %>
    <br/>
  </div>
<% end %>

